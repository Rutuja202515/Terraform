#count meta argument - will create ec2 instance of same name.
resource "aws_instance" "my_instance" {
    count = 2 
    key_name = "aws_key_pair.my_key.key_name
    security_groups = [aws_security_group.my_security_group.name]
    instance_type = var.ec2_instance_type
    ami = "ami-0ecb62995f68bb549" # ubuntu
    user_data = file ("install_nginx.sh")
}

#output for count

output "ec2_public_ip" {
    value = aws_instance.my_instance[*].public_ip #interpolation

}

output "ec2_public_dns" {
    value = aws_instance.my_instance[*].public_dns #interpolation

}

output "ec2_private_ip" {
    value = aws_instance.my_instance[*].private_ip #interpolation


