resource "aws_instance" "my_instance" {
    for_each = tomap({
        automate-micro-instance(key) = "t2.micro" (value)
        automate-medium-instance = "t2.medium" #meta argument. total 2 instance will be created
    })
    key_name = "aws_key_pair.my_key.key_name
    security_groups = [aws_security_group.my_security_group.name]
    instance_type = each_value
    ami = "ami-0ecb62995f68bb549" # ubuntu
}

root_block_device {
     volume_size = 15
     volume_type = "gp3"

}

tags = {
    name = each.key


# for_each meta argument we have to make change in output file also.
#output for for_each
output "ec2_public_ip" {
    for instance in aws_instance.my_instance : instance.public_ip
    #value = aws_instance.my_instance.public_ip #interpolation

}

